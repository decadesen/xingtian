## 后端选型对比与阶段决策

### 目标与约束
- 目标：为“刑天”提供稳定的数据存储、简单定时任务、未来可扩展的AI教练能力
- 约束：尽快可用、隐私与稳定优先、个人项目的维护成本可控

### 方案对比

1) Supabase（托管Postgres + Auth + Storage + Edge Functions）
- 优势：开箱即用的认证与数据库、行级安全、SQL/REST/RPC、存储与Edge Functions、生态完善
- 成本：零后端自建成本，迭代速度快，前期学习曲线低
- 风险：平台绑定与限额；需理解Postgres与策略（RLS）以保证安全
- 定时任务：pg_cron/Edge Functions可实现

2) 自建Go后端（Go + Postgres/SQLite + 自托管）
- 优势：最大灵活性与可控性；有利于深入工程能力（API设计、并发、部署）
- 成本：架构、部署、监控、CI/CD、日志与安全策略均需自建；上线速度慢
- 风险：维护负担高；需要投入较多时间完善非功能性特性
- 定时任务：自行实现（cron/队列）更灵活但更复杂

### 现状与路径
- 已接入 Supabase 完成云存储与基础同步（匿名策略，个人使用场景）
- 后续如需：可升级 Auth + RLS；逐步以 Go 微服务增强报告/批处理能力

### 数据迁移策略
- 前端localStorage → Supabase：以统一模型接口导出JSON并导入数据库；保留数据版本号和迁移脚本
- Supabase → Go迁移/共存：以API边界为单位逐步替换；通过事件总线或Webhooks保持一致性

### 安全与隐私
- 阶段2.1：使用Supabase RLS与行级加密（如必要）；明确数据最小化原则
- 阶段2.2：Go服务采用JWT/OAuth、审计日志与速率限制，关键数据加密存储

### 近期里程碑
- M1：本地持久化与主页面完成（已达成）
- M2：Supabase 云同步（已达成，匿名策略）
- M3：数据浏览与轻量统计（待定）
